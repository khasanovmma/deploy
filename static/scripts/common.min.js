"use strict";

setTimeout(function () {
  var option = document.querySelector('option');
  option.innerHTML = 'Tilni o\'zgartirish';
}, 1500);
setTimeout(function () {
  link = document.querySelectorAll('.pagination__a');
  var newsBox = document.querySelector('.news__box');

  for (var i = 0; i < link.length; i++) {
    link[i].addEventListener('click', function (e) {
      e.preventDefault();
      newsBox.remove();
      get = e.target.getAttribute("href");
      fetch("http://127.0.0.1:8000/".concat(get)).then(function (response) {
        return response.text();
      }).then(function (data) {
        var div = document.querySelector('.news .container .title');
        var parsedResponse = new window.DOMParser().parseFromString(data, "text/html");
        setTimeout(function () {
          var newsBox = document.querySelectorAll('.news__box');
          newsBox[1].remove();
        }, 100);
        var newBox = parsedResponse.querySelector('.news__box');
        div.after(newBox);
      });
    });
  }
}, 2000);
window.addEventListener('scroll', function () {
  var scrollDistance = window.scrollY;

  if (window.innerWidth > 768) {
    document.querySelectorAll('.sections-body').forEach(function (el, i) {
      if (el.offsetTop - document.querySelector('.nav').clientHeight <= scrollDistance) {
        document.querySelectorAll('.nav a').forEach(function (el) {
          if (el.classList.contains('active')) {
            el.classList.remove('active');
          }
        });
        document.querySelectorAll('.nav li')[i].querySelector('a').classList.add('active');
      }
    });
  }
}); // Get the modal

var modal = document.querySelector('.modal');
var bd = document.querySelector('body');
var modalTitle = document.querySelector('.modal-block__title');
var modalContent = document.querySelector('.modal-block__text');
var newsTitle = document.querySelectorAll('.news-block__title');
var newsContent = document.querySelectorAll('.news-block__text'); // Get the button that opens the modal

var btn = document.querySelectorAll("#myBtn"); // Get the <span> element that closes the modal

var span = document.getElementsByClassName("close")[0]; // When the user clicks the button, open the modal 

var _loop = function _loop(i) {
  btn[i].addEventListener('click', function () {
    console.log(modalTitle.innerHTML);
    modal.style.display = "block";
    bd.style.overflow = 'hidden';
    modalTitle.innerHTML = newsTitle[i].innerHTML;
    modalContent.innerHTML = newsContent[i].innerHTML;
  });
};

for (var i = 0; i < btn.length; i++) {
  _loop(i);
} // When the user clicks on <span> (x), close the modal


span.onclick = function () {
  modal.style.display = "none";
  bd.style.overflow = 'auto';
}; // When the user clicks anywhere outside of the modal, close it


window.onclick = function (event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
};

function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    pageLanguage: 'uz'
  }, 'google_translate_element');
}

function animate(obj, initVal, lastVal, duration) {
  var startTime = null; //get the current timestamp and assign it to the currentTime variable

  var currentTime = Date.now(); //pass the current timestamp to the step function

  var step = function step(currentTime) {
    //if the start time is null, assign the current time to startTime
    if (!startTime) {
      startTime = currentTime;
    } //calculate the value to be used in calculating the number to be displayed


    var progress = Math.min((currentTime - startTime) / duration, 1); //calculate what to be displayed using the value gotten above

    obj.innerHTML = Math.floor(progress * (lastVal - initVal) + initVal); //checking to make sure the counter does not exceed the last value (lastVal)

    if (progress < 1) {
      window.requestAnimationFrame(step);
    } else {
      window.cancelAnimationFrame(window.requestAnimationFrame(step));
    }
  }; //start animating


  window.requestAnimationFrame(step);
}

var text1 = document.getElementById('value1');
var text2 = document.getElementById('value2');
var text3 = document.getElementById('value3');

var load = function load() {
  animate(text1, 0, 564, 5000);
  animate(text2, 0, 10153, 5000);
  animate(text3, 100, 10717, 5000);
}; // nav link


var links = document.querySelectorAll('.nav__link');
var pages = document.querySelectorAll('.page'); // nav

var navControl = document.querySelectorAll('.nav__btn, .nav__close'),
    navToggle = document.querySelectorAll('.nav__btn, .nav__list');
navControl.forEach(function (btn) {
  return btn.addEventListener('click', function () {
    navToggle.forEach(function (el) {
      return el.classList.toggle('open');
    });
  });
}); // slider

var $slider = document.querySelector('.slider');
var $sliderBtn = document.querySelectorAll('[data-target]');
var $sliderItem = document.querySelectorAll('.slider__item');
var activeSlide = 0;
$sliderItem.forEach(function (item, i) {
  if (item.classList.contains('active')) {
    activeSlide = i;
  }
});
$sliderBtn.forEach(function (btn) {
  btn.addEventListener('click', function (e) {
    sliderMove(e.target.getAttribute('id'));
  });
});

function sliderMove(direction) {
  if (direction === 'next') {
    if (activeSlide < $sliderItem.length - 1) {
      activeSlide++;
    } else {
      activeSlide = 0;
    }
  } else {
    if (activeSlide > 0) {
      activeSlide--;
    } else {
      activeSlide = $sliderItem.length - 1;
    }
  }

  $sliderItem.forEach(function (item) {
    item.classList.remove('active');
  });
  $sliderItem[activeSlide].classList.add('active');
}

var interval = setInterval(function () {
  return sliderMove('next');
}, 3000); // slider

var $mainSlider = document.querySelector('.main-slider');
var $mainSliderBtn = document.querySelectorAll('[data-target]');
var $mainSliderItem = document.querySelectorAll('.main-slider__item');
var activeSlid = 0;
$mainSliderItem.forEach(function (item, i) {
  if (item.classList.contains('active')) {
    activeSlid = i;
  }
});
$mainSliderBtn.forEach(function (btn) {
  btn.addEventListener('click', function (e) {
    sliderChange(e.target.getAttribute('id'));
  });
});

function sliderChange(direction) {
  if (direction === 'next') {
    if (activeSlid < $mainSliderItem.length - 1) {
      activeSlid++;
    } else {
      activeSlid = 0;
    }
  } else {
    if (activeSlid > 0) {
      activeSlid--;
    } else {
      activeSlid = $mainSliderItem.length - 1;
    }
  }

  $mainSliderItem.forEach(function (item) {
    item.classList.remove('active');
  });
  $mainSliderItem[activeSlid].classList.add('active');
}

var mainInterval = setInterval(function () {
  return sliderChange('next');
}, 3000);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJzZXRUaW1lb3V0Iiwib3B0aW9uIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaW5uZXJIVE1MIiwibGluayIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJuZXdzQm94IiwiaSIsImxlbmd0aCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwicHJldmVudERlZmF1bHQiLCJyZW1vdmUiLCJnZXQiLCJ0YXJnZXQiLCJnZXRBdHRyaWJ1dGUiLCJmZXRjaCIsInRoZW4iLCJyZXNwb25zZSIsInRleHQiLCJkYXRhIiwiZGl2IiwicGFyc2VkUmVzcG9uc2UiLCJ3aW5kb3ciLCJET01QYXJzZXIiLCJwYXJzZUZyb21TdHJpbmciLCJuZXdCb3giLCJhZnRlciIsInNjcm9sbERpc3RhbmNlIiwic2Nyb2xsWSIsImlubmVyV2lkdGgiLCJmb3JFYWNoIiwiZWwiLCJvZmZzZXRUb3AiLCJjbGllbnRIZWlnaHQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImFkZCIsIm1vZGFsIiwiYmQiLCJtb2RhbFRpdGxlIiwibW9kYWxDb250ZW50IiwibmV3c1RpdGxlIiwibmV3c0NvbnRlbnQiLCJidG4iLCJzcGFuIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImNvbnNvbGUiLCJsb2ciLCJzdHlsZSIsImRpc3BsYXkiLCJvdmVyZmxvdyIsIm9uY2xpY2siLCJldmVudCIsImdvb2dsZVRyYW5zbGF0ZUVsZW1lbnRJbml0IiwiZ29vZ2xlIiwidHJhbnNsYXRlIiwiVHJhbnNsYXRlRWxlbWVudCIsInBhZ2VMYW5ndWFnZSIsImFuaW1hdGUiLCJvYmoiLCJpbml0VmFsIiwibGFzdFZhbCIsImR1cmF0aW9uIiwic3RhcnRUaW1lIiwiY3VycmVudFRpbWUiLCJEYXRlIiwibm93Iiwic3RlcCIsInByb2dyZXNzIiwiTWF0aCIsIm1pbiIsImZsb29yIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJ0ZXh0MSIsImdldEVsZW1lbnRCeUlkIiwidGV4dDIiLCJ0ZXh0MyIsImxvYWQiLCJsaW5rcyIsInBhZ2VzIiwibmF2Q29udHJvbCIsIm5hdlRvZ2dsZSIsInRvZ2dsZSIsIiRzbGlkZXIiLCIkc2xpZGVyQnRuIiwiJHNsaWRlckl0ZW0iLCJhY3RpdmVTbGlkZSIsIml0ZW0iLCJzbGlkZXJNb3ZlIiwiZGlyZWN0aW9uIiwiaW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsIiRtYWluU2xpZGVyIiwiJG1haW5TbGlkZXJCdG4iLCIkbWFpblNsaWRlckl0ZW0iLCJhY3RpdmVTbGlkIiwic2xpZGVyQ2hhbmdlIiwibWFpbkludGVydmFsIl0sIm1hcHBpbmdzIjoiOztBQUFBQSxVQUFVLENBQUMsWUFBTTtBQUNiLE1BQUlDLE1BQU0sR0FBR0MsUUFBUSxDQUFDQyxhQUFULENBQXVCLFFBQXZCLENBQWI7QUFDQUYsRUFBQUEsTUFBTSxDQUFDRyxTQUFQLEdBQW1CLHFCQUFuQjtBQUdILENBTFMsRUFLUCxJQUxPLENBQVY7QUFPQUosVUFBVSxDQUFDLFlBQU07QUFDZkssRUFBQUEsSUFBSSxHQUFHSCxRQUFRLENBQUNJLGdCQUFULENBQTBCLGdCQUExQixDQUFQO0FBRUQsTUFBSUMsT0FBTyxHQUFHTCxRQUFRLENBQUNDLGFBQVQsQ0FBdUIsWUFBdkIsQ0FBZDs7QUFFRSxPQUFLLElBQUlLLENBQUMsR0FBQyxDQUFYLEVBQWNBLENBQUMsR0FBQ0gsSUFBSSxDQUFDSSxNQUFyQixFQUE2QkQsQ0FBQyxFQUE5QixFQUFrQztBQUNsQ0gsSUFBQUEsSUFBSSxDQUFDRyxDQUFELENBQUosQ0FBUUUsZ0JBQVIsQ0FBeUIsT0FBekIsRUFBa0MsVUFBQ0MsQ0FBRCxFQUFNO0FBQ3RDQSxNQUFBQSxDQUFDLENBQUNDLGNBQUY7QUFDQUwsTUFBQUEsT0FBTyxDQUFDTSxNQUFSO0FBQ0FDLE1BQUFBLEdBQUcsR0FBR0gsQ0FBQyxDQUFDSSxNQUFGLENBQVNDLFlBQVQsQ0FBc0IsTUFBdEIsQ0FBTjtBQUNBQyxNQUFBQSxLQUFLLGlDQUEwQkgsR0FB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QUFHRCxlQUFlLENBQUN4RixNQUFoQixHQUF5QixDQUExQyxFQUE2QztBQUN6Q3lGLE1BQUFBLFVBQVU7QUFDYixLQUZELE1BRU87QUFDSEEsTUFBQUEsVUFBVSxHQUFHLENBQWI7QUFDSDtBQUNKLEdBTkQsTUFNTztBQUNILFFBQUlBLFVBQVUsR0FBRyxDQUFqQixFQUFvQjtBQUNoQkEsTUFBQUEsVUFBVTtBQUNiLEtBRkQsTUFFTztBQUNIQSxNQUFBQSxVQUFVLEdBQUdELGVBQWUsQ0FBQ3hGLE1BQWhCLEdBQXlCLENBQXRDO0FBQ0g7QUFDSjs7QUFDRHdGLEVBQUFBLGVBQWUsQ0FBQ2pFLE9BQWhCLENBQXdCLFVBQUEwRCxJQUFJLEVBQUk7QUFDNUJBLElBQUFBLElBQUksQ0FBQ3RELFNBQUwsQ0FBZXZCLE1BQWYsQ0FBc0IsUUFBdEI7QUFDSCxHQUZEO0FBR0FvRixFQUFBQSxlQUFlLENBQUNDLFVBQUQsQ0FBZixDQUE0QjlELFNBQTVCLENBQXNDRSxHQUF0QyxDQUEwQyxRQUExQztBQUNIOztBQUNELElBQUk4RCxZQUFZLEdBQUdOLFdBQVcsQ0FBQztBQUFBLFNBQU1LLFlBQVksQ0FBQyxNQUFELENBQWxCO0FBQUEsQ0FBRCxFQUE2QixJQUE3QixDQUE5QiIsInNvdXJjZXNDb250ZW50IjpbInNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgbGV0IG9wdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ29wdGlvbicpXHJcbiAgICBvcHRpb24uaW5uZXJIVE1MID0gJ1RpbG5pIG9cXCd6Z2FydGlyaXNoJ1xyXG5cclxuXHJcbn0sIDE1MDApO1xyXG5cclxuc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgbGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wYWdpbmF0aW9uX19hJylcclxuXHJcblx0bGV0IG5ld3NCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubmV3c19fYm94JylcclxuXHJcbiAgIGZvciAobGV0IGk9MDsgaTxsaW5rLmxlbmd0aDsgaSsrKSB7XHJcbiAgIGxpbmtbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSk9PiB7XHJcblx0ICAgIGUucHJldmVudERlZmF1bHQoKVxyXG5cdCAgICBuZXdzQm94LnJlbW92ZSgpXHJcblx0ICAgIGdldCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImhyZWZcIilcclxuXHQgICAgZmV0Y2goYGh0dHA6Ly8xMjcuMC4wLjE6ODAwMC8ke2dldH1gKVxyXG4gICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UudGV4dCgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICAgICBsZXQgZGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5ld3MgLmNvbnRhaW5lciAudGl0bGUnKVxyXG4gICAgICAgICAgIGxldCBwYXJzZWRSZXNwb25zZSA9IChuZXcgd2luZG93LkRPTVBhcnNlcigpKS5wYXJzZUZyb21TdHJpbmcoZGF0YSwgXCJ0ZXh0L2h0bWxcIik7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgbGV0IG5ld3NCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubmV3c19fYm94JylcclxuICAgICAgICBuZXdzQm94WzFdLnJlbW92ZSgpXHJcbiAgICAgICAgfSwgMTAwKTtcclxuICAgICAgICAgICBsZXQgbmV3Qm94ID0gcGFyc2VkUmVzcG9uc2UucXVlcnlTZWxlY3RvcignLm5ld3NfX2JveCcpXHJcbiAgICAgICAgICAgZGl2LmFmdGVyKG5ld0JveClcclxuICAgICAgICB9KTtcclxuXHQgICAgfSlcclxuXHJcbn1cclxuICAgIFxyXG59LCAyMDAwKTtcclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsICgpID0+IHtcclxuICAgIGxldCBzY3JvbGxEaXN0YW5jZSA9IHdpbmRvdy5zY3JvbGxZO1xyXG5cclxuICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+IDc2OCkge1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWN0aW9ucy1ib2R5JykuZm9yRWFjaCgoZWwsIGkpID0+IHtcclxuICAgICAgICAgICAgaWYgKGVsLm9mZnNldFRvcCAtIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXYnKS5jbGllbnRIZWlnaHQgPD0gc2Nyb2xsRGlzdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uYXYgYScpLmZvckVhY2goKGVsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm5hdiBsaScpW2ldLnF1ZXJ5U2VsZWN0b3IoJ2EnKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59KTtcclxuLy8gR2V0IHRoZSBtb2RhbFxyXG52YXIgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwnKTtcclxudmFyIGJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xyXG52YXIgbW9kYWxUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1ibG9ja19fdGl0bGUnKTtcclxudmFyIG1vZGFsQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1ibG9ja19fdGV4dCcpO1xyXG52YXIgbmV3c1RpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm5ld3MtYmxvY2tfX3RpdGxlJyk7XHJcbnZhciBuZXdzQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5uZXdzLWJsb2NrX190ZXh0Jyk7XHJcblxyXG4vLyBHZXQgdGhlIGJ1dHRvbiB0aGF0IG9wZW5zIHRoZSBtb2RhbFxyXG52YXIgYnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIiNteUJ0blwiKTtcclxuXHJcbi8vIEdldCB0aGUgPHNwYW4+IGVsZW1lbnQgdGhhdCBjbG9zZXMgdGhlIG1vZGFsXHJcbnZhciBzcGFuID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImNsb3NlXCIpWzBdO1xyXG5cclxuLy8gV2hlbiB0aGUgdXNlciBjbGlja3MgdGhlIGJ1dHRvbiwgb3BlbiB0aGUgbW9kYWwgXHJcblxyXG5cclxuZm9yIChsZXQgaSA9IDA7IGkgPCBidG4ubGVuZ3RoOyBpKyspIHtcclxuICAgIGJ0bltpXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhtb2RhbFRpdGxlLmlubmVySFRNTCk7XHJcbiAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgICAgICBiZC5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xyXG4gICAgICAgIG1vZGFsVGl0bGUuaW5uZXJIVE1MID0gbmV3c1RpdGxlW2ldLmlubmVySFRNTFxyXG4gICAgICAgIG1vZGFsQ29udGVudC5pbm5lckhUTUwgPSBuZXdzQ29udGVudFtpXS5pbm5lckhUTUxcclxuICAgIH0pXHJcbn1cclxuLy8gV2hlbiB0aGUgdXNlciBjbGlja3Mgb24gPHNwYW4+ICh4KSwgY2xvc2UgdGhlIG1vZGFsXHJcbnNwYW4ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIGJkLnN0eWxlLm92ZXJmbG93ID0gJ2F1dG8nO1xyXG59XHJcblxyXG4vLyBXaGVuIHRoZSB1c2VyIGNsaWNrcyBhbnl3aGVyZSBvdXRzaWRlIG9mIHRoZSBtb2RhbCwgY2xvc2UgaXRcclxud2luZG93Lm9uY2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgIGlmIChldmVudC50YXJnZXQgPT0gbW9kYWwpIHtcclxuICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdvb2dsZVRyYW5zbGF0ZUVsZW1lbnRJbml0KCkge1xyXG4gICAgbmV3IGdvb2dsZS50cmFuc2xhdGUuVHJhbnNsYXRlRWxlbWVudCh7IHBhZ2VMYW5ndWFnZTogJ3V6JyB9LCAnZ29vZ2xlX3RyYW5zbGF0ZV9lbGVtZW50Jyk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBhbmltYXRlKG9iaiwgaW5pdFZhbCwgbGFzdFZhbCwgZHVyYXRpb24pIHtcclxuXHJcbiAgICBsZXQgc3RhcnRUaW1lID0gbnVsbDtcclxuXHJcbiAgICAvL2dldCB0aGUgY3VycmVudCB0aW1lc3RhbXAgYW5kIGFzc2lnbiBpdCB0byB0aGUgY3VycmVudFRpbWUgdmFyaWFibGVcclxuICAgIGxldCBjdXJyZW50VGltZSA9IERhdGUubm93KCk7XHJcblxyXG4gICAgLy9wYXNzIHRoZSBjdXJyZW50IHRpbWVzdGFtcCB0byB0aGUgc3RlcCBmdW5jdGlvblxyXG4gICAgY29uc3Qgc3RlcCA9IChjdXJyZW50VGltZSkgPT4ge1xyXG5cclxuICAgICAgICAvL2lmIHRoZSBzdGFydCB0aW1lIGlzIG51bGwsIGFzc2lnbiB0aGUgY3VycmVudCB0aW1lIHRvIHN0YXJ0VGltZVxyXG4gICAgICAgIGlmICghc3RhcnRUaW1lKSB7XHJcbiAgICAgICAgICAgIHN0YXJ0VGltZSA9IGN1cnJlbnRUaW1lO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9jYWxjdWxhdGUgdGhlIHZhbHVlIHRvIGJlIHVzZWQgaW4gY2FsY3VsYXRpbmcgdGhlIG51bWJlciB0byBiZSBkaXNwbGF5ZWRcclxuICAgICAgICBjb25zdCBwcm9ncmVzcyA9IE1hdGgubWluKChjdXJyZW50VGltZSAtIHN0YXJ0VGltZSkgLyBkdXJhdGlvbiwgMSk7XHJcblxyXG4gICAgICAgIC8vY2FsY3VsYXRlIHdoYXQgdG8gYmUgZGlzcGxheWVkIHVzaW5nIHRoZSB2YWx1ZSBnb3R0ZW4gYWJvdmVcclxuICAgICAgICBvYmouaW5uZXJIVE1MID0gTWF0aC5mbG9vcihwcm9ncmVzcyAqIChsYXN0VmFsIC0gaW5pdFZhbCkgKyBpbml0VmFsKTtcclxuXHJcbiAgICAgICAgLy9jaGVja2luZyB0byBtYWtlIHN1cmUgdGhlIGNvdW50ZXIgZG9lcyBub3QgZXhjZWVkIHRoZSBsYXN0IHZhbHVlIChsYXN0VmFsKVxyXG4gICAgICAgIGlmIChwcm9ncmVzcyA8IDEpIHtcclxuICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShzdGVwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSh3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vc3RhcnQgYW5pbWF0aW5nXHJcbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApO1xyXG59XHJcblxyXG5sZXQgdGV4dDEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmFsdWUxJyk7XHJcbmxldCB0ZXh0MiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2YWx1ZTInKTtcclxubGV0IHRleHQzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZhbHVlMycpO1xyXG5cclxuXHJcbmNvbnN0IGxvYWQgPSAoKSA9PiB7XHJcbiAgICBhbmltYXRlKHRleHQxLCAwLCA1NjQsIDUwMDApO1xyXG4gICAgYW5pbWF0ZSh0ZXh0MiwgMCwgMTAxNTMsIDUwMDApO1xyXG4gICAgYW5pbWF0ZSh0ZXh0MywgMTAwLCAxMDcxNywgNTAwMCk7XHJcbn1cclxuXHJcblxyXG5cclxuLy8gbmF2IGxpbmtcclxuY29uc3QgbGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubmF2X19saW5rJyk7XHJcbmNvbnN0IHBhZ2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBhZ2UnKTtcclxuLy8gbmF2XHJcbmNvbnN0IG5hdkNvbnRyb2wgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubmF2X19idG4sIC5uYXZfX2Nsb3NlJyksXHJcbiAgICBuYXZUb2dnbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubmF2X19idG4sIC5uYXZfX2xpc3QnKTtcclxuXHJcbm5hdkNvbnRyb2wuZm9yRWFjaChidG4gPT4gYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgbmF2VG9nZ2xlLmZvckVhY2goZWwgPT4gZWwuY2xhc3NMaXN0LnRvZ2dsZSgnb3BlbicpKVxyXG59KSlcclxuXHJcbi8vIHNsaWRlclxyXG5cclxuY29uc3QgJHNsaWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXInKTtcclxuY29uc3QgJHNsaWRlckJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXRhcmdldF0nKTtcclxuY29uc3QgJHNsaWRlckl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVyX19pdGVtJyk7XHJcbmxldCBhY3RpdmVTbGlkZSA9IDBcclxuJHNsaWRlckl0ZW0uZm9yRWFjaCgoaXRlbSwgaSkgPT4ge1xyXG4gICAgaWYgKGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xyXG4gICAgICAgIGFjdGl2ZVNsaWRlID0gaVxyXG4gICAgfVxyXG59KVxyXG4kc2xpZGVyQnRuLmZvckVhY2goYnRuID0+IHtcclxuICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgc2xpZGVyTW92ZShlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2lkJykpXHJcbiAgICB9KVxyXG59KVxyXG5cclxuZnVuY3Rpb24gc2xpZGVyTW92ZShkaXJlY3Rpb24pIHtcclxuICAgIGlmIChkaXJlY3Rpb24gPT09ICduZXh0Jykge1xyXG4gICAgICAgIGlmIChhY3RpdmVTbGlkZSA8ICRzbGlkZXJJdGVtLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgYWN0aXZlU2xpZGUrK1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZVNsaWRlID0gMFxyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKGFjdGl2ZVNsaWRlID4gMCkge1xyXG4gICAgICAgICAgICBhY3RpdmVTbGlkZS0tXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYWN0aXZlU2xpZGUgPSAkc2xpZGVySXRlbS5sZW5ndGggLSAxXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgJHNsaWRlckl0ZW0uZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpXHJcbiAgICB9KVxyXG4gICAgJHNsaWRlckl0ZW1bYWN0aXZlU2xpZGVdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXHJcbn1cclxubGV0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4gc2xpZGVyTW92ZSgnbmV4dCcpLCAzMDAwKVxyXG5cclxuLy8gc2xpZGVyXHJcblxyXG5jb25zdCAkbWFpblNsaWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluLXNsaWRlcicpO1xyXG5jb25zdCAkbWFpblNsaWRlckJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXRhcmdldF0nKTtcclxuY29uc3QgJG1haW5TbGlkZXJJdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1haW4tc2xpZGVyX19pdGVtJyk7XHJcbmxldCBhY3RpdmVTbGlkID0gMFxyXG4kbWFpblNsaWRlckl0ZW0uZm9yRWFjaCgoaXRlbSwgaSkgPT4ge1xyXG4gICAgaWYgKGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xyXG4gICAgICAgIGFjdGl2ZVNsaWQgPSBpXHJcbiAgICB9XHJcbn0pXHJcbiRtYWluU2xpZGVyQnRuLmZvckVhY2goYnRuID0+IHtcclxuICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgc2xpZGVyQ2hhbmdlKGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnaWQnKSlcclxuICAgIH0pXHJcbn0pXHJcblxyXG5mdW5jdGlvbiBzbGlkZXJDaGFuZ2UoZGlyZWN0aW9uKSB7XHJcbiAgICBpZiAoZGlyZWN0aW9uID09PSAnbmV4dCcpIHtcclxuICAgICAgICBpZiAoYWN0aXZlU2xpZCA8ICRtYWluU2xpZGVySXRlbS5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZVNsaWQrK1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGFjdGl2ZVNsaWQgPSAwXHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoYWN0aXZlU2xpZCA+IDApIHtcclxuICAgICAgICAgICAgYWN0aXZlU2xpZC0tXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYWN0aXZlU2xpZCA9ICRtYWluU2xpZGVySXRlbS5sZW5ndGggLSAxXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgJG1haW5TbGlkZXJJdGVtLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKVxyXG4gICAgfSlcclxuICAgICRtYWluU2xpZGVySXRlbVthY3RpdmVTbGlkXS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKVxyXG59XHJcbmxldCBtYWluSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiBzbGlkZXJDaGFuZ2UoJ25leHQnKSwgMzAwMClcclxuIl0sImZpbGUiOiJjb21tb24ubWluLmpzIn0=
